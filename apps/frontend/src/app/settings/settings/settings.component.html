<div class="container">
  <h1>
    User Settings
  </h1>
  <div class="mb-3">
    <label class="form-label" for="email">E-Mail</label>
    <input type="email" class="form-control" id="email" [(ngModel)]="email" [disabled]="!!user"/>
    @if (user) {
      <div class="form-text">
        Your email cannot be changed as a registered user.
      </div>
    }
  </div>
  <div class="mb-3">
    <app-token></app-token>
  </div>
  <h2>
    Push Notifications
  </h2>
  <button class="btn btn-primary mb-3" (click)="addPush()">
    Enable Push Notifications for this Device
  </button>
  <ul class="list-group mb-3">
    @for (info of pushInfo; track info) {
      <li class="list-group-item">
        <button class="btn btn-link text-danger bi-trash" ngbTooltip="Remove Device" (click)="removePush(info)">
        </button>
        {{ info.browser }}
        <span class="text-muted">on</span>
        {{ info.device }}
      </li>
    } @empty {
      <li class="list-group-item text-muted">
        No devices registered for push notifications.
      </li>
    }
  </ul>
  <hr/>
  <button class="btn btn-primary" (click)="save()">Save</button>
</div>
